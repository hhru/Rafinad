{"metadata":{"roleHeading":"Framework","symbolKind":"module","modules":[{"name":"Rafinad"}],"title":"Rafinad","role":"collection","externalID":"Rafinad"},"kind":"symbol","variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/rafinad"]}],"primaryContentSections":[{"content":[{"anchor":"Overview","type":"heading","level":2,"text":"Overview"},{"inlineContent":[{"type":"text","text":"Rafinad предоставляет механизмы для более строго-типизированной идентификации UI-компонентов"},{"type":"text","text":" "},{"type":"text","text":"для их удобного поиска и взаимодействия в UI-тестах."}],"type":"paragraph"},{"inlineContent":[{"text":"Для этого Rafinad вводит 2 новых термина:","type":"text"}],"type":"paragraph"},{"type":"termList","items":[{"term":{"inlineContent":[{"type":"text","text":"Accessibility-схема"}]},"definition":{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Вспомогательный тип тестируемого UI-компонента или экрана, который позволяет кратко описывать его структуру и возможности для тестов."}]}]}},{"term":{"inlineContent":[{"text":"Accessibility-ключ","type":"text"}]},"definition":{"content":[{"inlineContent":[{"text":"Аналог accessibility-идентификатора, который позволяет использовать key-path поля из accessibility-схемы в качестве идентификатора UI-компонента для его поиска в тестах.","type":"text"}],"type":"paragraph"}]}}]},{"anchor":"%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80","type":"heading","level":3,"text":"Пример"},{"inlineContent":[{"text":"В качестве примера возьмем простейший экран, который отображает информацию о пользователе.","type":"text"},{"text":" ","type":"text"},{"text":"Для простоты ограничимся только именем и должностью.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"Чтобы использовать Rafinad для этого экрана в тестах,","type":"text"},{"text":" ","type":"text"},{"text":"первым шагом следует добавить для него accessibility-схему,","type":"text"},{"text":" ","type":"text"},{"text":"наследуя базовый класс ","type":"text"},{"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/ScreenAccessibility","isActive":true,"type":"reference"},{"text":":","type":"text"}],"type":"paragraph"},{"code":["import Rafinad","","\/\/\/ Accessibility-схема экрана с информацией о пользователе ","class UserAccessibility: ScreenAccessibility {","","    let name = TextAccessibility()","    let position = TextAccessibility()","}"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"type":"text","text":"Далее необходимо установить accessibility-ключи для компонентов экрана,"},{"type":"text","text":" "},{"type":"text","text":"используя key-path полей схемы:"}],"type":"paragraph"},{"code":["import SwiftUI","","struct UserView: View {","","    let user: User","","    var body: some View {","        VStack(spacing: 4) {","            Text(user.name)","                .font(.largeTitle)","                \/\/ Установка ключа для имени пользователя","                .accessibilityKey(\\UserAccessibility.name)","","            Text(user.position)","                .font(.subheadline)","                .foregroundStyle(.secondary)","                \/\/ Установка ключа для должности пользователя","                .accessibilityKey(\\UserAccessibility.position)","        }","    }","}"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"text":"Теперь наш экран готов к UI-тестированию, осталось добавить сами тесты:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["import XCTest","import RafinadTesting","","@MainActor","final class UserScreenTests: XCTestCase {","","    let application = XCUIApplication()","","    func testThatUserNameIsCorrect() {","        application.launch()","","        application","            .screen(of: UserAccessibility.self) \/\/ получение экрана пользователя","            .name \/\/ получение компонента с именем пользователя","            .waitForExistence() \/\/ ожидание появления компонента","            .assert(text: \"Steve Jobs\") \/\/ проверка имени","    }","","    func testThatUserPositionIsCorrect() {","        application.launch()","","        application","            .screen(of: UserAccessibility.self) \/\/ получение экрана пользователя","            .position \/\/ получение компонента с должностью пользователя","            .waitForText(\"CEO\") \/\/ проверка текста должности","    }","}"]},{"level":3,"type":"heading","anchor":"%D0%98%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D1%8B","text":"Импорты"},{"inlineContent":[{"text":"Чтобы кодовая база приложений не имела лишних тестовых зависимостей, Rafinad разделен на 2 таргета:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"Rafinad","type":"codeVoice"},{"text":": предоставляет общие сущности для использования в кодовой базе приложений","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"RafinadTesting","type":"codeVoice"},{"text":": предоставляет тестовые сущности для использования в кодовой базе тестов","type":"text"}]}]}],"type":"unorderedList"}],"kind":"content"}],"hierarchy":{"paths":[[]]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad"},"schemaVersion":{"patch":0,"minor":3,"major":0},"sections":[],"topicSections":[{"title":"Rafinad","anchor":"Rafinad","identifiers":["doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/ViewAccessibility","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/TextAccessibility","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/ImageAccessibility","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/AnyAccessibility","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/ScreenAccessibility","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/DisableableAccessibility","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/EditableAccessibility","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/SelectableAccessibility","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/SwipeableAccessibility","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/RotatableAccessibility","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/PinchableAccessibility","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/AccessibilityKey"]},{"title":"RafinadTesting","anchor":"RafinadTesting","identifiers":["doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/TestingElement","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/TestingList","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/Testing"]},{"generated":true,"title":"Extended Modules","anchor":"Extended-Modules","identifiers":["doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/SwiftUICore","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/UIKit","doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/XCTest"]}],"abstract":[{"text":"Удобный и компилируемый синтаксис для UI-тестирования iOS и tvOS приложений,","type":"text"},{"text":" ","type":"text"},{"text":"совместимый со SwiftUI и UIKit.","type":"text"}],"references":{"doc://ru.hh.Rafinad/documentation/Rafinad/EditableAccessibility":{"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"EditableAccessibility","kind":"identifier"}],"title":"EditableAccessibility","type":"topic","url":"\/documentation\/rafinad\/editableaccessibility","abstract":[{"type":"text","text":"Протокол для accessibility-схемы, наделяющий UI-компоненты возможностью"},{"type":"text","text":" "},{"type":"text","text":"редактирования текста в тестах."}],"role":"symbol","kind":"symbol","identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/EditableAccessibility","navigatorTitle":[{"text":"EditableAccessibility","kind":"identifier"}]},"doc://ru.hh.Rafinad/documentation/Rafinad/XCTest":{"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/XCTest","url":"\/documentation\/rafinad\/xctest","type":"topic","abstract":[],"kind":"symbol","role":"collection","title":"XCTest"},"doc://ru.hh.Rafinad/documentation/Rafinad/RotatableAccessibility":{"role":"symbol","type":"topic","abstract":[{"text":"Протокол для accessibility-схемы, наделяющий UI-компоненты возможностью","type":"text"},{"text":" ","type":"text"},{"text":"выполнять жесты поворота двумя касаниями в тестах.","type":"text"}],"navigatorTitle":[{"text":"RotatableAccessibility","kind":"identifier"}],"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/RotatableAccessibility","url":"\/documentation\/rafinad\/rotatableaccessibility","title":"RotatableAccessibility","kind":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"RotatableAccessibility","kind":"identifier"}]},"doc://ru.hh.Rafinad/documentation/Rafinad/AccessibilityKey":{"kind":"symbol","role":"symbol","identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/AccessibilityKey","title":"AccessibilityKey","type":"topic","url":"\/documentation\/rafinad\/accessibilitykey","abstract":[{"type":"text","text":"Accessibility-ключ UI-компонента для его поиска в тестах."}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AccessibilityKey","kind":"identifier"}],"navigatorTitle":[{"text":"AccessibilityKey","kind":"identifier"}]},"doc://ru.hh.Rafinad/documentation/Rafinad/SwiftUICore":{"abstract":[],"title":"SwiftUICore","identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/SwiftUICore","role":"collection","type":"topic","url":"\/documentation\/rafinad\/swiftuicore","kind":"symbol"},"doc://ru.hh.Rafinad/documentation/Rafinad":{"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad","role":"collection","url":"\/documentation\/rafinad","kind":"symbol","type":"topic","title":"Rafinad","abstract":[{"text":"Удобный и компилируемый синтаксис для UI-тестирования iOS и tvOS приложений,","type":"text"},{"type":"text","text":" "},{"type":"text","text":"совместимый со SwiftUI и UIKit."}]},"doc://ru.hh.Rafinad/documentation/Rafinad/TestingList":{"type":"topic","navigatorTitle":[{"kind":"identifier","text":"TestingList"}],"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"TestingList"}],"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/TestingList","url":"\/documentation\/rafinad\/testinglist","title":"TestingList","role":"symbol","abstract":[{"type":"text","text":"Тестируемое представление списка UI-компонентов для использования в тестах."}],"kind":"symbol"},"doc://ru.hh.Rafinad/documentation/Rafinad/AnyAccessibility":{"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AnyAccessibility","kind":"identifier"}],"navigatorTitle":[{"text":"AnyAccessibility","kind":"identifier"}],"abstract":[{"text":"Accessibility-схема UI-компонента с неизвестным типом.","type":"text"}],"url":"\/documentation\/rafinad\/anyaccessibility","role":"symbol","title":"AnyAccessibility","type":"topic","kind":"symbol","identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/AnyAccessibility"},"doc://ru.hh.Rafinad/documentation/Rafinad/TestingElement":{"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/TestingElement","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"TestingElement","kind":"identifier"}],"kind":"symbol","role":"symbol","url":"\/documentation\/rafinad\/testingelement","abstract":[{"text":"Тестируемое представление UI-компонента или экрана.","type":"text"}],"title":"TestingElement","type":"topic","navigatorTitle":[{"text":"TestingElement","kind":"identifier"}]},"doc://ru.hh.Rafinad/documentation/Rafinad/SwipeableAccessibility":{"type":"topic","kind":"symbol","navigatorTitle":[{"text":"SwipeableAccessibility","kind":"identifier"}],"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/SwipeableAccessibility","url":"\/documentation\/rafinad\/swipeableaccessibility","role":"symbol","title":"SwipeableAccessibility","abstract":[{"type":"text","text":"Протокол для accessibility-схемы, наделяющий UI-компоненты возможностью"},{"type":"text","text":" "},{"type":"text","text":"выполнять жесты свайпа в тестах."}],"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"SwipeableAccessibility","kind":"identifier"}]},"doc://ru.hh.Rafinad/documentation/Rafinad/TextAccessibility":{"abstract":[{"text":"Accessibility-схема стандартного текстового UI-компонента.","type":"text"}],"kind":"symbol","title":"TextAccessibility","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"TextAccessibility","kind":"identifier"}],"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/TextAccessibility","type":"topic","navigatorTitle":[{"text":"TextAccessibility","kind":"identifier"}],"url":"\/documentation\/rafinad\/textaccessibility","role":"symbol"},"doc://ru.hh.Rafinad/documentation/Rafinad/SelectableAccessibility":{"abstract":[{"type":"text","text":"Протокол для accessibility-схемы, наделяющий UI-компоненты возможностью"},{"type":"text","text":" "},{"type":"text","text":"обрабатывать выбранное состояние в тестах."}],"type":"topic","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"SelectableAccessibility","kind":"identifier"}],"title":"SelectableAccessibility","role":"symbol","navigatorTitle":[{"text":"SelectableAccessibility","kind":"identifier"}],"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/SelectableAccessibility","kind":"symbol","url":"\/documentation\/rafinad\/selectableaccessibility"},"doc://ru.hh.Rafinad/documentation/Rafinad/ScreenAccessibility":{"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ScreenAccessibility","kind":"identifier"}],"abstract":[{"text":"Accessibility-схема экрана.","type":"text"}],"role":"symbol","title":"ScreenAccessibility","url":"\/documentation\/rafinad\/screenaccessibility","kind":"symbol","navigatorTitle":[{"text":"ScreenAccessibility","kind":"identifier"}],"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/ScreenAccessibility","type":"topic"},"doc://ru.hh.Rafinad/documentation/Rafinad/ViewAccessibility":{"kind":"symbol","type":"topic","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ViewAccessibility","kind":"identifier"}],"title":"ViewAccessibility","role":"symbol","navigatorTitle":[{"text":"ViewAccessibility","kind":"identifier"}],"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/ViewAccessibility","url":"\/documentation\/rafinad\/viewaccessibility","abstract":[{"text":"Базовая accessibility-схема для всех UI-компонентов.","type":"text"}]},"doc://ru.hh.Rafinad/documentation/Rafinad/Testing":{"abstract":[{"text":"Вспомогательный протокол общих методов ","type":"text"},{"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/TestingElement","isActive":true,"type":"reference"},{"text":" и ","type":"text"},{"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/TestingList","isActive":true,"type":"reference"},{"text":".","type":"text"}],"type":"topic","role":"symbol","url":"\/documentation\/rafinad\/testing","identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/Testing","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"Testing"}],"kind":"symbol","title":"Testing","navigatorTitle":[{"kind":"identifier","text":"Testing"}]},"doc://ru.hh.Rafinad/documentation/Rafinad/ImageAccessibility":{"type":"topic","abstract":[{"type":"text","text":"Accessibility-схема стандартного UI-компонента изображений."}],"navigatorTitle":[{"text":"ImageAccessibility","kind":"identifier"}],"title":"ImageAccessibility","identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/ImageAccessibility","kind":"symbol","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ImageAccessibility","kind":"identifier"}],"url":"\/documentation\/rafinad\/imageaccessibility","role":"symbol"},"doc://ru.hh.Rafinad/documentation/Rafinad/UIKit":{"title":"UIKit","identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/UIKit","kind":"symbol","url":"\/documentation\/rafinad\/uikit","abstract":[],"type":"topic","role":"collection"},"doc://ru.hh.Rafinad/documentation/Rafinad/DisableableAccessibility":{"abstract":[{"type":"text","text":"Протокол для accessibility-схемы, наделяющий UI-компоненты возможностью"},{"type":"text","text":" "},{"type":"text","text":"обрабатывать отключенное состояние в тестах."}],"navigatorTitle":[{"text":"DisableableAccessibility","kind":"identifier"}],"kind":"symbol","role":"symbol","identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/DisableableAccessibility","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"DisableableAccessibility","kind":"identifier"}],"type":"topic","title":"DisableableAccessibility","url":"\/documentation\/rafinad\/disableableaccessibility"},"doc://ru.hh.Rafinad/documentation/Rafinad/PinchableAccessibility":{"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"PinchableAccessibility","kind":"identifier"}],"title":"PinchableAccessibility","type":"topic","url":"\/documentation\/rafinad\/pinchableaccessibility","kind":"symbol","navigatorTitle":[{"text":"PinchableAccessibility","kind":"identifier"}],"identifier":"doc:\/\/ru.hh.Rafinad\/documentation\/Rafinad\/PinchableAccessibility","role":"symbol","abstract":[{"text":"Протокол для accessibility-схемы, наделяющий UI-компоненты возможностью","type":"text"},{"text":" ","type":"text"},{"text":"выполнять жесты масштабирования двумя касаниями в тестах.","type":"text"}]}}}